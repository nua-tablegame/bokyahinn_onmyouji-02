<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>怪異一覧ページ</title>
<style>
:root { --card-bg:#fff; --accent:#c62828; }
*{box-sizing:border-box;}
body {
  font-family: system-ui, -apple-system, "Helvetica Neue", Arial, "Noto Sans JP", sans-serif;
  margin:0;
  background: url('images/background_default.png') no-repeat center center fixed;
  background-size: cover;
  color:#111;
}
header { text-align:center; padding:20px 10px 10px; }
header img { max-width:320px; height:auto; display:inline-block; }
main { padding: 0 12px 40px; }
h2 { text-align:center; margin:14px 0; font-size:1.25rem; }
.cards { display:flex; flex-wrap:wrap; justify-content:center; gap:12px; margin:0 auto; max-width:1100px; }
.card { width:120px; cursor:pointer; border:2px solid transparent; padding:6px; background:var(--card-bg); border-radius:8px; transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease; box-shadow:0 1px 3px rgba(0,0,0,0.06); text-align:center; user-select:none; }
.card:hover { transform:translateY(-4px); box-shadow:0 6px 18px rgba(0,0,0,0.08); }
.card.selected { border-color: var(--accent); box-shadow:0 10px 30px rgba(198,40,40,0.12); transform:translateY(-6px) scale(1.02); }
.card img { width:100%; height:auto; display:block; border-radius:6px; }
.card-name { margin-top:6px; font-size:0.95rem; line-height:1.1; }
.candidate-wrap { display:flex; justify-content:center; margin-top:26px; padding:16px; }
.candidate { padding:14px; border-top:2px solid #333; background:var(--card-bg); border-radius:8px; min-width:180px; text-align:center; box-shadow:0 2px 8px rgba(0,0,0,0.04); display:flex; gap:12px; flex-wrap:wrap; justify-content:center; }
.candidate img { border-radius:6px; max-width:120px; height:auto; opacity:0; transform:translateY(10px); transition: opacity 0.3s ease, transform 0.3s ease; }
.candidate img.fade-in { opacity:1; transform:translateY(0); }
footer { text-align:center; padding:18px 10px; }
footer img { max-width:160px; height:auto; display:inline-block; }
@media (max-width:420px){ .card { width:94px; } .card img { border-radius:6px; } }
</style>
</head>
<body>
<header>
  <img src="images/bokyahinn_title.png" alt="タイトルロゴ">
</header>
<main>
<h2>怪異一覧</h2>
<div class="cards" id="cards"></div>
<div class="candidate-wrap">
  <div class="candidate" id="candidate">
    <h3>怪異候補</h3>
    <p>選択したカードがここに表示されます</p>
  </div>
</div>
</main>
<footer>
  <img src="images/bokyahinn_logo.png" alt="制作者ロゴ">
</footer>
<script>
(function(){
  const container=document.getElementById('cards');
  const candidate=document.getElementById('candidate');

  // カード生成（01～29）
  for(let i=1;i<=29;i++){
    const div=document.createElement('div');
    div.className='card';
    div.dataset.name='怪異'+i;
    const imgNumber=String(i).padStart(2,'0');
    div.innerHTML=`<img src="images/bokyahinn_image_${imgNumber}.png" alt="怪異${i}"><div class="card-name">怪異${i}</div>`;
    container.appendChild(div);
  }

  let selectedCards=[];
  function updateCandidateDisplay(){
    candidate.innerHTML='<h3>怪異候補</h3>';
    if(selectedCards.length===0){
      candidate.innerHTML+='<p>選択したカードがここに表示されます</p>';
      return;
    }
    selectedCards.forEach(card=>{
      const imgSrc=card.querySelector('img').src;
      const name=card.dataset.name||'';
      const div=document.createElement('div');
      div.innerHTML=`<img src="${imgSrc}" alt="${name}"><div style="font-weight:600;margin-top:6px;">${name}</div>`;
      candidate.appendChild(div);
      const imgElem=div.querySelector('img');
      setTimeout(()=>{ imgElem.classList.add('fade-in'); },20);
    });
  }

  container.addEventListener('click',(ev)=>{
    const card=ev.target.closest('.card');
    if(!card) return;
    const idx=selectedCards.indexOf(card);
    if(idx===-1){ selectedCards.push(card); card.classList.add('selected'); }
    else { selectedCards.splice(idx,1); card.classList.remove('selected'); }
    updateCandidateDisplay();
  });

  // ===== 管理者ページへのリダイレクト機能 =====
  const SECRET_KEY = 'nua9499';
  const query = window.location.search;
  const hash = window.location.hash;
  let goAdmin = false;

  if(query === '?' + SECRET_KEY) {
    goAdmin = true;
  } else {
    try {
      const params = new URLSearchParams(query);
      for(const val of params.values()){
        if(val === SECRET_KEY){ goAdmin = true; break; }
      }
    } catch(e){}
  }
  if(hash === '#' + SECRET_KEY){ goAdmin = true; }

  if(goAdmin){
    window.location.href = 'admin.html?' + encodeURIComponent(SECRET_KEY);
  }
})();
</script>
</body>
</html>
